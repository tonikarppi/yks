language: python
dist: xenial
python:
  - '3.7'
cache:
  pip: true
  directories:
    - '$HOME/.cache/pre-commit'
install:
  - pip install -r test_requirements.txt
  - pip install twine wheel
jobs:
  include:
    - script: make test
    - script: make check
    - stage: deploy
      # if: branch = master AND tag IS present
      script:
        - make dist
        - make publish
